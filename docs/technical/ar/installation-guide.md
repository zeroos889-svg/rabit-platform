# دليل التثبيت - منصة رابِط

**الإصدار:** 1.0.0  
**التاريخ:** نوفمبر 2025  
**المؤلف:** فريق رابِط التقني

---

## نظرة عامة

يوفر هذا الدليل إرشادات شاملة لتثبيت وتكوين منصة رابِط لإدارة الموارد البشرية. المنصة مبنية على تقنيات حديثة تضمن الأداء العالي والأمان والتوافق الكامل مع نظام العمل السعودي.

## المتطلبات الأساسية

قبل البدء في عملية التثبيت، يجب التأكد من توفر المتطلبات التالية في بيئة العمل:

### متطلبات الأجهزة

| المكون | الحد الأدنى | الموصى به |
|--------|-------------|-----------|
| المعالج | 2 نواة | 4 نواة أو أكثر |
| الذاكرة العشوائية | 4 جيجابايت | 8 جيجابايت أو أكثر |
| مساحة التخزين | 20 جيجابايت | 50 جيجابايت أو أكثر |
| الاتصال بالإنترنت | 10 ميجابت/ثانية | 100 ميجابت/ثانية أو أكثر |

### متطلبات البرمجيات

تعتمد منصة رابِط على مجموعة من التقنيات والأدوات الحديثة التي يجب تثبيتها قبل البدء:

**Node.js**: يجب تثبيت الإصدار 22.13.0 أو أحدث من Node.js لتشغيل الخادم والتطبيق. يمكن التحقق من الإصدار المثبت باستخدام الأمر `node --version` في سطر الأوامر.

**pnpm**: مدير الحزم المستخدم في المشروع، ويجب تثبيت الإصدار 9.0.0 أو أحدث. يمكن تثبيته عبر npm باستخدام الأمر `npm install -g pnpm`.

**قاعدة البيانات**: تستخدم المنصة MySQL أو TiDB كقاعدة بيانات رئيسية. يجب تثبيت MySQL 8.0 أو أحدث، أو TiDB 7.0 أو أحدث.

**Git**: لإدارة الإصدارات والحصول على الكود المصدري، يجب تثبيت Git 2.30 أو أحدث.

## خطوات التثبيت

### 1. الحصول على الكود المصدري

يمكن الحصول على الكود المصدري للمنصة من خلال استنساخ المستودع من GitHub:

```bash
git clone https://github.com/rabit-hr/rabit-platform.git
cd rabit-platform
```

### 2. تثبيت الحزم والاعتماديات

بعد الحصول على الكود المصدري، يجب تثبيت جميع الحزم والاعتماديات اللازمة:

```bash
pnpm install
```

سيقوم هذا الأمر بتنزيل وتثبيت جميع الحزم المطلوبة تلقائياً، بما في ذلك React وTypeScript وTailwind CSS وغيرها من المكتبات الأساسية.

### 3. إعداد قاعدة البيانات

يجب إنشاء قاعدة بيانات جديدة للمنصة وتكوين الاتصال بها:

```bash
# إنشاء قاعدة بيانات جديدة
mysql -u root -p -e "CREATE DATABASE rabit_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# منح الصلاحيات للمستخدم
mysql -u root -p -e "GRANT ALL PRIVILEGES ON rabit_db.* TO 'rabit_user'@'localhost' IDENTIFIED BY 'secure_password';"
```

### 4. تكوين متغيرات البيئة

يجب إنشاء ملف `.env` في المجلد الجذر للمشروع وتعبئته بالقيم المناسبة:

```env
# قاعدة البيانات
DATABASE_URL=mysql://rabit_user:secure_password@localhost:3306/rabit_db

# المصادقة
JWT_SECRET=your_jwt_secret_key_here
OAUTH_SERVER_URL=https://api.manus.im
VITE_OAUTH_PORTAL_URL=https://oauth.manus.im

# التطبيق
VITE_APP_ID=your_app_id_here
VITE_APP_TITLE=رابِط - مساعد الموارد البشرية السعودي
VITE_APP_LOGO=/rabit-logo.svg

# Manus APIs
BUILT_IN_FORGE_API_URL=https://forge.manus.im
BUILT_IN_FORGE_API_KEY=your_api_key_here
```

### 5. تطبيق هيكل قاعدة البيانات

بعد تكوين الاتصال بقاعدة البيانات، يجب تطبيق الهيكل الأساسي:

```bash
pnpm db:push
```

سيقوم هذا الأمر بإنشاء جميع الجداول والعلاقات اللازمة في قاعدة البيانات تلقائياً.

### 6. إنشاء البيانات الأولية (اختياري)

لإنشاء بيانات تجريبية للاختبار:

```bash
npx tsx scripts/seed-test-users.mjs
```

سينشئ هذا الأمر حسابات تجريبية للمدير والمستشارين والشركات.

### 7. تشغيل المنصة

بعد إتمام جميع الخطوات السابقة، يمكن تشغيل المنصة في وضع التطوير:

```bash
pnpm dev
```

ستكون المنصة متاحة على العنوان `http://localhost:3000`.

## التحقق من التثبيت

للتأكد من نجاح عملية التثبيت، يمكن اتباع الخطوات التالية:

**فتح المتصفح**: قم بفتح متصفح الويب والانتقال إلى `http://localhost:3000`. يجب أن تظهر الصفحة الرئيسية للمنصة بشكل صحيح.

**اختبار تسجيل الدخول**: جرب تسجيل الدخول باستخدام أحد الحسابات التجريبية (admin@admin.com / admin). يجب أن تتمكن من الدخول بنجاح والوصول إلى لوحة التحكم.

**التحقق من قاعدة البيانات**: تأكد من إنشاء جميع الجداول بشكل صحيح باستخدام الأمر:

```bash
mysql -u rabit_user -p rabit_db -e "SHOW TABLES;"
```

يجب أن تظهر 55 جدولاً على الأقل.

## الإنتاج (Production)

لتشغيل المنصة في بيئة الإنتاج، اتبع الخطوات التالية:

### 1. بناء التطبيق

```bash
pnpm build
```

### 2. تشغيل الخادم

```bash
pnpm start
```

### 3. استخدام PM2 (موصى به)

لضمان استمرارية التشغيل وإعادة التشغيل التلقائي:

```bash
npm install -g pm2
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

## استكشاف الأخطاء

في حال مواجهة مشاكل أثناء التثبيت، راجع الحلول التالية:

### خطأ في الاتصال بقاعدة البيانات

تأكد من صحة بيانات الاتصال في ملف `.env` وأن خادم MySQL يعمل بشكل صحيح. يمكن التحقق من حالة الخادم باستخدام:

```bash
systemctl status mysql
```

### خطأ في تثبيت الحزم

في حالة فشل تثبيت الحزم، حاول حذف مجلد `node_modules` وملف `pnpm-lock.yaml` ثم أعد التثبيت:

```bash
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

### مشاكل في الأداء

إذا كانت المنصة بطيئة، تأكد من توفر الموارد الكافية (CPU, RAM) وأن قاعدة البيانات محسّنة بشكل صحيح.

## الدعم الفني

للحصول على المساعدة الفنية، يمكن التواصل مع فريق الدعم عبر:

- **البريد الإلكتروني**: support@rabit.sa
- **الموقع**: https://rabit.sa/support
- **الهاتف**: +966 11 234 5678

---

**ملاحظة**: هذا الدليل يتم تحديثه بشكل دوري. تأكد من الرجوع إلى أحدث إصدار على الموقع الرسمي.
